# Практика 7

## Завдання 1
Використайте popen(), щоб передати вивід команди rwho (команда UNIX) до more (команда UNIX) у програмі на C.
##
rwho() видає результат, подібний до who, але для всіх комп'ютерів у цій локальній мережі. Якщо протягом 11 хвилин від комп'ютера не було отримано жодного звіту, rwho вважає, що комп'ютер не працює, і не повідомляє про користувачів, які востаннє входили до системи на цьому комп'ютері.

Результат виконання звичної команди rwho()
![image](https://github.com/user-attachments/assets/eb742360-da52-4d45-b53f-956d230bfcc4)

Використовуючи rwho та more за допомогою popen()
![image](https://github.com/user-attachments/assets/84170d28-80b4-4aa7-a09a-3260dc9e5135)

## Завдання 2
Напишіть програму мовою C, яка імітує команду ls -l в UNIX — виводить список усіх файлів у поточному каталозі та перелічує права доступу тощо.
(Варіант вирішення, що просто виконує ls -l із вашої програми, — не підходить.)
##
Програма реалізує основну функціональність ls -l. Перш за все відкриває директорію (поточну або вказану), читає кожен файл через `readdir()`, отримує детальну інформацію про файл через `stat()`

![image](https://github.com/user-attachments/assets/7643de48-351c-4608-a719-1d67b6d34fb9)

## Завдання 3
Напишіть програму, яка друкує рядки з файлу, що містять слово, передане як аргумент програми (проста версія утиліти grep в UNIX).
##

Приймаються два аргументи командного рядка - шуканий текст та ім'я файлу для пошуку. Вона послідовно читає файл рядок за рядком через функцію fgets(), використовує strstr() для перевірки наявності шуканого підрядка в кожному рядку, і якщо знаходить збіг, виводить весь рядок на стандартний вивід
![image](https://github.com/user-attachments/assets/c14258e7-05d0-412e-9c61-ea6194914131)

## Завдання 4
Напишіть програму, яка виводить список файлів, заданих у вигляді аргументів, з зупинкою кожні 20 рядків, доки не буде натиснута клавіша (спрощена версія утиліти more в UNIX).
##
Алгоритм включає циклічну обробку всіх переданих файлів, відкриття кожного файлу з перевіркою помилок, послідовне читання рядків через fgets(), підрахунок виведених рядків і паузу після кожних 20 рядків з відображенням підказки "(ENTER)". Між файлами показується повідомлення "--MORE--(END - Next: filename)" для інформування користувача про перехід до наступного файлу

![image](https://github.com/user-attachments/assets/e48ede77-1ffb-482a-aeb7-1cc1c47540bd)
![image](https://github.com/user-attachments/assets/fc7ed464-a45a-4327-9652-b09bb9996eaa)

## Завдання 5
Напишіть програму, яка перелічує всі файли в поточному каталозі та всі файли в підкаталогах.
##
Ця програма є найпростішою реалізацією базової функціональності команди ls в UNIX системах, призначеної для виведення списку всіх файлів та директорій у поточному каталозі.
Я використала функцію scandir() для сканування поточної директорії з користувацьким фільтром is_directory_filter(), який перевіряє кожен елемент директорії на відповідність критеріям відбору. Фільтр спочатку відкидає спеціальні записи "." і "..", потім використовує stat() для отримання інформації про файл і перевіряє через макрос S_ISDIR(), чи є елемент директорією

![image](https://github.com/user-attachments/assets/df0e7eef-b867-4675-a183-ee6317c8d360)

## Завдання 6
Напишіть програму, яка перелічує лише підкаталоги у алфавітному порядку.
##
Алгоритм включає виклик  scandir() для сканування поточної директорії з функцією-фільтром(не кава) is_directory_filter(), який перевіряє кожен елемент директорії на відповідність критеріям відбору. та функцією сортування alphasort(), обробку помилок сканування, циклічне виведення імен знайдених директорій та коректне звільнення пам'яті для кожного елемента масиву та самого масиву покажчиків

![image](https://github.com/user-attachments/assets/3db18dab-567d-4064-bd1a-38df20b184e3)

## Завдання 7
Напишіть програму, яка показує користувачу всі його/її вихідні програми на C, а потім в інтерактивному режимі запитує, чи потрібно надати іншим дозвіл на читання (read permission); у разі ствердної відповіді — такий дозвіл повинен бути наданий.
##
Особливістю реалізації цього завдання є комбінація різних методів фільтрації. Я одночасно перевіряю тип файлу через entry->d_type, відсутність розширення через пошук останньої крапки в назві, і наявність прав виконання через системний виклик access(). Функція has_extension() використовує strrchr() для знаходження останнього входження крапки в рядку, що є ефективним способом визначення розширення файлу

![image](https://github.com/user-attachments/assets/8c90e240-9d54-401c-be58-bb4edf815053)
## Завдання 8
Напишіть програму, яка надає користувачу можливість видалити будь-який або всі файли у поточному робочому каталозі. Має з’являтися ім’я файлу з запитом, чи слід його видалити.
##
Програма реалізує простий інструмент для видалення звичайних файлів у поточній директорії з підтвердженням від користувача. Основна логіка побудована на використанні функції readdir() для отримання списку елементів у каталозі та stat() — для визначення типу кожного з них. Через макрос S_ISREG() програма відфільтровує лише звичайні файли, пропускаючи директорії, символічні посилання та інші спеціальні об’єкти
Видалення файлу здійснюється через стандартну функцію remove(), яка працює як з файлами, так і з порожніми директоріями, і включає перевірку успішності операції з відповідним повідомленням

![image](https://github.com/user-attachments/assets/fc4550c4-fac1-4470-808a-1842f28b64bf)

Результат після відалення певних об'єктів

![image](https://github.com/user-attachments/assets/d5774ce6-5e3d-4d9f-97a3-4ed90032b214)


## Завдання 9
Напишіть програму на C, яка вимірює час виконання фрагмента коду в мілісекундах.
##
Схожі завдання ми виконували іще проходячи курс Основи Програмування. Доволі типова реалізація таймера

![image](https://github.com/user-attachments/assets/445aca30-5f39-4bc0-83c6-d0b8ce19e2b4)

## Завдання 10
 Напишіть програму мовою C для створення послідовності випадкових чисел з плаваючою комою у діапазонах:
 (a) від 0.0 до 1.0
 (b) від 0.0 до n, де n — будь-яке дійсне число з плаваючою точкою.
 Початкове значення генератора випадкових чисел має бути встановлене так, щоб гарантувати унікальну послідовність.
Примітка: використання прапорця -Wall під час компіляції є обов’язковим.
##
Спочатку програма виводить кілька чисел у стандартному діапазоні від 0.0 до 1.0, після чого запитує в користувача значення n і генерує ще кілька чисел у межах від 0.0 до n. Для цього використовується функція rand() з попереднім масштабуванням до потрібного діапазону. Генератор ініціалізується поточним часом, щоб результати були різними при кожному запуску

![image](https://github.com/user-attachments/assets/0ca0632f-5f78-4c02-b90b-a56766df3ee0)

## Завдання 11
Реалізуйте утиліту командного рядка, яка виводить процеси, запущені лише з нестандартних шеллів, не використовуючи ps, top, htop.
##
Отже спершу перевіремо, які список шелів
```
cat /etc/shells
```
![image](https://github.com/user-attachments/assets/ad95885c-480f-4f3e-8ee9-4d85c9ba4502)


На основі цієї інформація створимо масив стандартних шелів, можна додати також поширені проте які не показала ця команда.

```
const char *standard_shells[MAX_SHELLS] = {
    "/bin/sh",
    "/bin/csh",
    "/bin/tcsh",
};

```
Спершу я пробувала написати власний скрипт програми зі сном в іншому шелі та за допомогою `Alt + F1` та `Alt + F2`, які запускають різні термінали, спробувати відслідкувати процеси. Для перевірки чи взагалі процес зіпускається виконувалася команда ps, проте тільки для особистого аналізу. Сам код перелічених команд із завдання(ті, що заборонені) не містить.
Втім, для перевірки потрібно запустити таки нестандартний шел. Наприклад таким може бути fish. Проте перш за все його потрібно скачати. 

```
pkg install fish
```
Втім тут виникли у мене певні труднощі, оскільки freebsd намертво відмовлялася завантажувати пакети. Потім сталася, якась помилка і я не могла залогінитися навіть у root але пароль не змінювався ніяк? Snapshot врятував, хоча й більшість моїх файлів були втрачені. Сказати, що я була у розпачі нічого  не сказати. 
Тому розберемо теоретично поведінку програми. 

Fish  встановлюється за шляхом /usr/local/bin/fish. Цей шлях не входить до вище визначеногго масиву standard_shells, тому fish ідентифікується як нестандартна оболонка. 
Якщо користувач має відкритими декілька терміналів з fish або запустив fish в фоновому режимі, кожен процес буде показаний окремо з унікальним pid
