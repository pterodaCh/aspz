# Практична 3
## Завдання 1
У завданні потрібно використати перелічені команди, щоб поекспериментуйте з максимальним лімітом ресурсів відкритих файлів. Потрібно виконати завдання з root-правами та без них.
```
$ ulimit -n
$ ulimit -aS | grep "open files"
$ ulimit -aH | grep "open files"
$ ulimit -n 3000
$ ulimit -aS | grep "open files"
$ ulimit -aH | grep "open files"
$ ulimit -n 3001
$ ulimit -n 2000
$ ulimit -n
$ ulimit -aS | grep "open files"
$ ulimit -aH | grep "open files"
$ ulimit -n 3000
```
##

Спершу виконаємо та подивимося результат команд з root-правами, оскільки це рівень доступу, який користувач отримує автоматично.

```docker run -it dockeraspz bash```

![image](https://github.com/user-attachments/assets/b418b8dd-bf68-4645-90cd-65eb63b57e80)

Ця команда дозволить нам переглянути результат запропонованих команд без root-прав
```docker run -it --user $USER dockeraspz bash```

![image](https://github.com/user-attachments/assets/8d84fcd6-5be1-488e-9897-6ae975cb81a0)

Порівнюючи результати виконання команд, помічаємо, що відмінності відсутні. Скоріше за все у завданні малося на увазі про привілейовані права доступу. Їх можна отримати використовуючи прапорець `--privileged`. Тоді й справді результат різнитиметься

![image](https://github.com/user-attachments/assets/bff620af-8c2f-43b5-85d2-bb3be3d3747d)

## Завдання 2

У Docker-контейнері встановіть утиліту perf(1). Поекспериментуйте з досягненням процесом встановленого ліміту.

##
У документації [seccomp докера](https://docs.docker.com/engine/security/seccomp/) зазначається, що системні виклики “perf*” і “ptrace” заборонено за замовчуванням з міркувань безпеки. Є декілька методів обійти цю заборону. Один з них запустити докер з прапорцем `--priveleged`.

Далі потрібно докачати потрібні пакети у яких знаходиться команда `perf`. Встановити потрібну відповідну версію до вашого ядра. Визначаити її можна за допомогою наступної команди
```
uname -r
```
У мене довгий час не виходило розібратися чому убунта не хоче втановлювати певні пакети і не може їх алокувати. Проблема вирішилася коли замість
команди

```
apt install -y linux-tools-5.15.0-1078-iotg
```

Використати 
```
apt-get install -y linux-tools-5.15.0-1078-iotg
apt-get install -y linux-cloud-tools-5.15.0-1078-iotg
```
Тоді потрібні файли скачалися. Проте в терміналі всерівно вибивало помилку

![image](https://github.com/user-attachments/assets/98c082b0-c531-497a-bbe7-c3488a44c8e4)

Після цього проблеми не зникли, оскільки якзо щось погане має статися воно обов'язково станеться. Для віртуалки не вистачалося місця, а після переміщення файлів на диск d, все взагалі перестало запускатися. Тому, що freebsd, що ubuntu потрібно було видалити та переустановити.

